#
# Copyright 2010-2012 The Kuali Foundation
#
# Licensed under the Educational Community License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.opensource.org/licenses/ecl2.php
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

project.build.sourceEncoding=${project.build.sourceEncoding}

project.groupId=${project.groupId}
project.artifactId=${project.artifactId}
project.version=${project.version}

project.basedir=${project.basedir}
project.build.directory=${project.build.directory}

kuali.groupId=${kuali.groupId}
kuali.groupId.code=${kuali.groupId.code}


      BEGIN
        FOR SESSIONS IN ( SELECT SID, SERIAL#
          FROM   V$SESSION
          WHERE  USERNAME = 'KSENV2')
        LOOP
          EXECUTE IMMEDIATE 'ALTER SYSTEM KILL SESSION '''||SESSIONS.SID||','||SESSIONS.SERIAL#||'''';
        END LOOP;
        EXECUTE IMMEDIATE 'DROP USER KSENV2 CASCADE';
        EXCEPTION WHEN OTHERS THEN
        IF SQLCODE != -01918 THEN
          RAISE;
        END IF;
      END;
      /

      BEGIN
        FOR SESSIONS IN (SELECT SID, SERIAL#
          FROM   V$SESSION
          WHERE  USERNAME = 'KSENV2')
        LOOP
          EXECUTE IMMEDIATE 'exec rdsadmin.rdsadmin_util.kill('|| SID ||',' || SERIAL# || ');';
        END LOOP;
        EXECUTE IMMEDIATE 'DROP USER KSENV2 CASCADE';
        EXCEPTION WHEN OTHERS THEN
        IF SQLCODE != -01918 THEN
          RAISE;
        END IF;
      END;
      /

      
      
exec rdsadmin.rdsadmin_util.kill(45,45003)
/      
45	45003
673	55079
      
select sid, serial# from v$session where username = 'KSENV2'
      
ALTER SYSTEM KILL SESSION '''||45||','||45003||'''
ALTER SYSTEM KILL SESSION '''||SESSIONS.SID||','||SESSIONS.SERIAL#||'''

select 'exec rdsadmin.rdsadmin_util.kill('|| sid ||',' || serial# || ');'
from v$session where username in ('KSENV2')
/

select 'exec rdsadmin.rdsadmin_util.kill('|| 45 ||',' || 45003 || ');'
from v$session where username in ('&myUsername', '&myOtherUserName');





