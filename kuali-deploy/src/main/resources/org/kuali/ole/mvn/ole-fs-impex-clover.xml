<?xml version="1.0" encoding="UTF-8"?>
<!--

  Copyright 2005-2012 The Kuali Foundation

  Licensed under the Educational Community License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.opensource.org/licenses/ecl2.php

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.

-->

<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <parent>
    <groupId>${parent.groupId}</groupId>
    <artifactId>${parent.artifactId}</artifactId>
    <version>${parent.version}</version>
  </parent>
  <groupId>${project.groupId}</groupId>
  <artifactId>olefs-impex-clover</artifactId>
  <version>${project.version}</version>
  <name>OLE Financial System Impex Clover</name>
  <description>
  This pom contains plugin executions for handling OLE Financial System Impex clover data
  This pom should not exist.  The only reason it is here is because of a serious flaw in the
  way the Ant based Impex tooling uses Clover ETL.  The JVM must be launched from the same
  directory as the build.xml file or everything blows up because of a lame hard coded pathing issue
  related to workspace.prm.  It looks for that file using "./workspace.prm" instead of something
  like "classpath:workspace.prm" or by allowing you to set a property or something along those lines.
  At any rate, if that issue gets fixed, remove this pom and fold it into ole-fs-impex.xml.
  </description>
  <build>
    <pluginManagement>
      <plugins>
        <plugin>
          <groupId>org.kuali.maven.plugins</groupId>
          <artifactId>properties-maven-plugin</artifactId>
          <version>${plugin.properties.version}</version>
          <executions>
            <execution>
              <id>read</id>
              <phase>initialize</phase>
              <goals>
                <goal>read-project-properties</goal>
              </goals>
              <configuration>
                <locations>
                  <param>${properties.all}</param>
                  <param>classpath:org/kuali/ole/ole-fs-impex-clover.properties</param>
                </locations>
              </configuration>
            </execution>
          </executions>
          <dependencies>
            <dependency>
              <groupId>${project.groupId}</groupId>
              <artifactId>${project.artifactId}</artifactId>
              <version>${project.version}</version>
            </dependency>
          </dependencies>
        </plugin>
        <plugin>
          <artifactId>maven-antrun-plugin</artifactId>
          <version>${plugin.antrun.version}</version>
          <executions>
            <execution>
              <id>schema</id>
              <phase>initialize</phase>
              <goals>
                <goal>run</goal>
              </goals>
              <configuration>
                <target name="schema">
                  <property name="maven.plugin.classpath" refid="maven.plugin.classpath" />
                  <ant antfile="${impex.ant.dir}/build.xml" dir="${impex.ant.dir}" target="check-import-properties" />
                  <ant antfile="${impex.ant.dir}/build.xml" dir="${impex.ant.dir}" target="create-ddl" />
                  <ant antfile="${impex.ant.dir}/build.xml" dir="${impex.ant.dir}" target="apply-ddl" />
                  <ant antfile="${impex.ant.dir}/build.xml" dir="${impex.ant.dir}" target="pre-import-sql" />
                  <ant antfile="${impex.ant.dir}/build.xml" dir="${impex.ant.dir}" target="import-data" />
                  <ant antfile="${impex.ant.dir}/build.xml" dir="${impex.ant.dir}" target="import-data2" />
                  <ant antfile="${impex.ant.dir}/build.xml" dir="${impex.ant.dir}" target="run-liquibase-post-import" />
                  <ant antfile="${impex.ant.dir}/build.xml" dir="${impex.ant.dir}" target="apply-constraint-ddl" />
                  <ant antfile="${impex.ant.dir}/build.xml" dir="${impex.ant.dir}" target="post-import-sql" />
                </target>
              </configuration>
            </execution>
          </executions>
        </plugin>
      </plugins>
    </pluginManagement>
    <plugins>
      <plugin>
        <groupId>org.kuali.maven.plugins</groupId>
        <artifactId>properties-maven-plugin</artifactId>
      </plugin>
      <plugin>
        <artifactId>maven-antrun-plugin</artifactId>
      </plugin>
    </plugins>
  </build>
</project>