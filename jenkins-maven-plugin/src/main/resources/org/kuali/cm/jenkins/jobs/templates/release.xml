<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
  <comment>Properties specific to releasing a Kuali project</comment>
  <entry key="jenkins.job.goals">release:prepare release:perform -B -e</entry>
  <entry key="jenkins.job.type">release</entry>
  <entry key="jenkins.job.postbuilders">${jenkins.job.postbuilders.1}</entry>
  <entry key="jenkins.job.postbuilders.1.targets">deploy nexus:staging-close nexus:staging-release -Pkuali-release,sonatype-oss-release -DskipTests -e</entry>
  <entry key="jenkins.job.postbuilders.1.mavenName">3.0.3</entry>
  <entry key="jenkins.job.postbuilders.1.pom">target/checkout/pom.xml</entry>
  <entry key="jenkins.job.postbuilders.1.usePrivateRepository">false</entry>
  <entry key="jenkins.job.runPostStepsIfResult.name">UNSTABLE</entry>
  <entry key="jenkins.job.runPostStepsIfResult.ordinal">1</entry>
  <entry key="jenkins.job.runPostStepsIfResult.color">YELLOW</entry>
  <entry key="jenkins.job.postbuilders.1"><![CDATA[
    <hudson.tasks.Maven>
      <targets>${jenkins.job.postbuilders.1.targets}</targets>
      <mavenName>${jenkins.job.postbuilders.1.mavenName}</mavenName>
      <pom>${jenkins.job.postbuilders.1.pom}</pom>
      <usePrivateRepository>${jenkins.job.postbuilders.1.usePrivateRepository}</usePrivateRepository>
    </hudson.tasks.Maven>
  ]]></entry>

  <entry key="jenkins.job.description.brief"><![CDATA[      
      <div id="jenkins-job-brief">
          <li id="jenkins-job-brief-title">Create an official Kuali release:</li>
          <li>Checkout a fresh copy of the project</li>
          <li>Alter the Maven poms</li>
          <ol class="jenkins-job-brief-sublist">
            <li>Remove SNAPSHOT from the version (eg change 1.0.0-SNAPSHOT to 1.0.0)</li>
            <li>Update the SCM information so it points to the release tag that is about to be created</li>
          </ol>
          <li>Execute "clean verify" to make sure altering the poms has not caused an issue</li>
          <li>Commit the modified poms</li>
          <li>Create a tag of the source tree containing the poms with the updated version/SCM information</li>
          <li>Alter the Maven poms again</li>
          <ol class="jenkins-job-brief-sublist">
            <li>Increment the version (eg change 1.0.0 to 1.0.1-SNAPSHOT)</li>
            <li>Change the SCM information back to what it was originally</li>
          </ol>
          <li>Commit the modified poms</li>
          <li>Checkout the tag</li>
          <li>Execute "deploy site-deploy" on the tag using the "kuali-release" profile</li>
          ${jenkins.job.description.kualiRelease}
          <li>Deploy the build artifacts to Kuali's public S3 repository</li>
          <li>Publish the Maven web site</li>
          <li>Deploy the build artifacts to the Sonatype Nexus instance that sync's with Maven Central</li>
      </div>
]]></entry>

</properties>
